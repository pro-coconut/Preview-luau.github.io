<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Luau Executor</title>

<link rel="stylesheet"
 href="https://cdn.jsdelivr.net/npm/codemirror@5/lib/codemirror.css">

<style>
:root{
  --bg:#0b0d12;
  --panel:#141823;
  --panel2:#1b2030;
  --accent:#5da9ff;
  --danger:#ff5d5d;
  --text:#e9ebf1;
  --muted:#9aa0b3;
}
*{box-sizing:border-box}

body{
  margin:0;
  height:100vh;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,monospace;
  overflow:hidden;
}

/* ===== HEADER ===== */
#header{
  height:44px;
  padding:0 14px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  background:linear-gradient(90deg,#111726,#1c2238);
  font-weight:600;
}
#badge{
  font-size:12px;
  color:var(--muted);
}

/* ===== TOOLBAR ===== */
#toolbar{
  display:flex;
  gap:8px;
  padding:8px;
  background:var(--panel);
  border-bottom:1px solid #000;
}
.toggle{
  padding:6px 10px;
  font-size:13px;
  background:var(--panel2);
  border:1px solid #000;
  border-radius:6px;
  color:var(--muted);
}
.toggle.on{
  color:var(--text);
  border-color:var(--accent);
}
.toggle.danger{
  border-color:var(--danger);
  color:var(--danger);
}

/* ===== TABS ===== */
#tabs{
  display:flex;
  background:var(--panel);
}
#tabs button{
  flex:1;
  padding:12px;
  background:none;
  border:none;
  color:var(--muted);
}
#tabs button.active{
  color:var(--text);
  border-bottom:2px solid var(--accent);
}

/* ===== LAYOUT ===== */
#container{
  display:flex;
  height:calc(100vh - 44px - 44px - 40px);
}
#editor{width:420px;background:var(--panel)}
#right{flex:1;display:flex;flex-direction:column}
#ui{flex:1;background:var(--panel2);position:relative}
#console{
  height:160px;
  background:#000;
  font-size:13px;
  padding:8px;
  overflow:auto;
}

/* ===== MOBILE ===== */
@media(max-width:768px){
  #container{flex-direction:column}
  #editor,#ui,#console{display:none;height:100%}
  .tab-active{display:block}
  #editor{width:100%}
}

/* ===== CODEMIRROR ===== */
.CodeMirror{
  height:100%;
  background:transparent;
  color:var(--text);
}
</style>
</head>

<body>

<!-- HEADER -->
<div id="header">
  <div>Luau Executor</div>
  <div id="badge">Realtime â€¢ Safe</div>
</div>

<!-- TOOLBAR -->
<div id="toolbar">
  <button id="rt" class="toggle on">Realtime</button>
  <button id="safe" class="toggle on">Safe mode</button>
  <button class="toggle danger" onclick="clearConsole()">Clear log</button>
</div>

<!-- TABS -->
<div id="tabs">
  <button class="active" onclick="tab(this,'editor')">Editor</button>
  <button onclick="tab(this,'ui')">UI</button>
  <button onclick="tab(this,'console')">Console</button>
</div>

<!-- CONTENT -->
<div id="container">
  <div id="editor" class="tab-active"></div>
  <div id="right">
    <div id="ui"></div>
    <div id="console"></div>
  </div>
</div>

<!-- LIBS -->
<script src="https://cdn.jsdelivr.net/npm/codemirror@5/lib/codemirror.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5/mode/lua/lua.js"></script>
<script src="https://cdn.jsdelivr.net/npm/luau-web/dist/luau.web.js"></script>

<!-- APP -->
<script src="console.js"></script>
<script src="draggable.js"></script>
<script src="bridge.js"></script>
<script src="roblox-mock.js"></script>
<script src="main.js"></script>

<!-- UI LOGIC -->
<script>
/* TAB */
function tab(btn,id){
  document.querySelectorAll("#tabs button")
    .forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");

  ["editor","ui","console"].forEach(t=>{
    document.getElementById(t).classList.remove("tab-active");
  });
  document.getElementById(id).classList.add("tab-active");
}

/* TOGGLES (UI ONLY) */
document.getElementById("rt").onclick=function(){
  this.classList.toggle("on");
};
document.getElementById("safe").onclick=function(){
  this.classList.toggle("on");
};

/* AUTO SAVE SCRIPT */
window.addEventListener("beforeunload",()=>{
  if(window.editor){
    localStorage.setItem("luau_script",editor.getValue());
  }
});
</script>

</body>
</html>
