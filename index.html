<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Luau Web Executor</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5/lib/codemirror.css">

<style>
:root{--bg:#0b0d12;--p:#141823;--p2:#1b2030;--a:#5da9ff;--d:#ff5d5d;--t:#e9ebf1;--m:#9aa0b3}
*{box-sizing:border-box}
body{margin:0;height:100vh;background:var(--bg);color:var(--t);font-family:system-ui,monospace;overflow:hidden}
#header{height:44px;padding:0 14px;display:flex;align-items:center;justify-content:space-between;background:#111726;font-weight:600}
#toolbar{display:flex;gap:8px;padding:8px;background:var(--p);border-bottom:1px solid #000}
.toggle{padding:6px 10px;font-size:13px;background:var(--p2);border:1px solid #000;border-radius:6px;color:var(--m)}
.toggle.on{color:var(--t);border-color:var(--a)}
.toggle.danger{border-color:var(--d);color:var(--d)}
#tabs{display:flex;background:var(--p)}
#tabs button{flex:1;padding:12px;background:none;border:none;color:var(--m)}
#tabs button.active{color:var(--t);border-bottom:2px solid var(--a)}
#container{display:flex;height:calc(100vh - 44px - 44px - 40px)}
#editor{width:420px;background:var(--p)}
#right{flex:1;display:flex;flex-direction:column}
#ui{flex:1;background:var(--p2);position:relative}
#console{height:160px;background:#000;font-size:13px;padding:8px;overflow:auto;white-space:pre-wrap}
@media(max-width:768px){
  #container{flex-direction:column}
  #editor,#ui,#console{display:none;height:100%}
  .tab-active{display:block}
  #editor{width:100%}
}
.CodeMirror{height:100%;background:transparent;color:var(--t)}
</style>
</head>

<body>
<div id="header">
  <div>Luau Web Executor</div>
  <div style="font-size:12px;color:var(--m)">Realtime â€¢ Safe</div>
</div>

<div id="toolbar">
  <button id="rt" class="toggle on">Realtime</button>
  <button id="safe" class="toggle on">Safe mode</button>
  <button id="clearBtn" class="toggle danger">Clear</button>
</div>

<div id="tabs">
  <button class="active" data-tab="editor">Editor</button>
  <button data-tab="ui">UI</button>
  <button data-tab="console">Console</button>
</div>

<div id="container">
  <div id="editor" class="tab-active"></div>
  <div id="right">
    <div id="ui"></div>
    <div id="console"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/codemirror@5/lib/codemirror.js"></script>
<script src="https://cdn.jsdelivr.net/npm/codemirror@5/mode/lua/lua.js"></script>
<script src="https://cdn.jsdelivr.net/npm/luau-web/dist/luau.web.js"></script>

<script src="roblox-mock.js"></script>
<script src="main.js"></script>

<script>
/* tabs */
document.querySelectorAll("#tabs button").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll("#tabs button").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    ["editor","ui","console"].forEach(id=>document.getElementById(id).classList.remove("tab-active"));
    document.getElementById(b.dataset.tab).classList.add("tab-active");
  };
});
/* toggles */
rt.onclick=()=>rt.classList.toggle("on");
safe.onclick=()=>safe.classList.toggle("on");
/* editor */
const editor=CodeMirror(editorEl=document.getElementById("editor"),{
  value:localStorage.getItem("luau_script")||`print("Luau Web Executor Ready")`,
  mode:"lua",lineNumbers:true,indentUnit:2,tabSize:2
});
window.editor=editor;
/* console */
window.log=(m)=>{const c=consoleEl=document.getElementById("console");c.textContent+=m+"\n";c.scrollTop=c.scrollHeight;}
clearBtn.onclick=()=>consoleEl.textContent="";
/* autosave */
addEventListener("beforeunload",()=>localStorage.setItem("luau_script",editor.getValue()));
</script>
</body>
</html>
